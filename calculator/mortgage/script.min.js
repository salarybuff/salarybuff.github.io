"use strict";function showPopup(e){document.getElementById(e).style.display="grid"}function closePopup(e){document.getElementById(e).style.display="none"}function calculate(){const e=parseFloat(document.getElementById("calculator-mortgage-capital").value),t=parseFloat(document.getElementById("calculator-mortgage-rate").value)/100,a=parseInt(document.getElementById("calculator-mortgage-period").value),n=parseInt(document.getElementById("calculator-mortgage-times").value),l=parseFloat(document.getElementById("calculator-mortgage-balance").value),o=parseFloat(document.getElementById("calculator-mortgage-additional").value),c=parseFloat(document.getElementById("calculator-mortgage-target").value);if(isNaN(e)||isNaN(t)||isNaN(a)||isNaN(n)||isNaN(l)||isNaN(o)||isNaN(c))return void alert("데이터를 입력해주세요.");if(e<0||t<0||a<0||n<0||l<0||o<0||c<0)return void alert("음수를 입력하셨습니다. 양수를 입력해 주십시오.");const u=t/12;let r=findTarget(c,l,u,a,n,calcMonthlyRepayment(l,u,a,n),o);document.getElementById("result1").innerText=parseInt(r.balanceWithoutDeductionTarget),document.getElementById("result2").innerText=parseInt(r.balanceWithoutDeductionFinal),document.getElementById("result3").innerText=parseInt(r.balanceWithDeductionTarget),document.getElementById("result4").innerText=parseInt(r.balanceWithDeductionFinal)}function findTarget(e,t,a,n,l,o,c){let u={balanceWithoutDeductionTarget:0,balanceWithDeductionTarget:0,balanceWithoutDeductionFinal:0,balanceWithDeductionFinal:0},r=!1,d=!1,i=!1,m=!1,g=t,s=t;for(let t=l+1;t<n;t++){const y=calcMonthlyRepayment(g,a,n,t-1),I=calcMonthlyRepayment(s,a,n,t-1);if(!r&&I<=e&&(u.balanceWithDeductionTarget=t-l,r=!0),!d&&y<=e&&(u.balanceWithoutDeductionTarget=t-l,d=!0),!i&&I<0&&(u.balanceWithDeductionFinal=t-l,i=!0),!m&&y<0&&(u.balanceWithoutDeductionFinal=t-l,m=!0),r&&d&&i&&m)return u;const p=I-a*s;g=g-(y-a*g)-c,s=s-p-c-(o-p)}return u}function calcMonthlyRepayment(e,t,a,n){return e*t*Math.pow(1+t,a-n)/(Math.pow(1+t,a-n)-1)}function reset(){document.getElementById("calculator-mortgage-capital").value="",document.getElementById("calculator-mortgage-rate").value="",document.getElementById("calculator-mortgage-period").value="",document.getElementById("calculator-mortgage-times").value="",document.getElementById("calculator-mortgage-balance").value="",document.getElementById("calculator-mortgage-additional").value="",document.getElementById("calculator-mortgage-target").value="",document.getElementById("result1").innerText="0",document.getElementById("result2").innerText="0",document.getElementById("result3").innerText="0",document.getElementById("result4").innerText="0"}window.addEventListener("keydown",e=>{"Enter"===e.key&&e.isTrusted&&calculate()});